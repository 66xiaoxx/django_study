require(['uskin'], function() {
    $(function() {
        require(['nicescroll'], function() {
            $(".u_content_body").niceScroll({
                cursorcolor: "rgba(0,0,0,.3)",
                cursorwidth: "5px",
                cursorborder: "0",
                cursorborderradius: "5px",
                background: "rgba(0,0,0,.1)",
            });
        });

        //iframe
        $(document).on('click', "#u_sidebar a", function() {
            if ($(this).attr("href") !== "javascript:void(0);" && $(this).attr("target") !== "_blank") {
                $("#iframe").attr("src", $(this).attr("href"));
                if ($(window).width() < 768) {
                    $(".u_layout").addClass("u_layout_sidebar_min").removeClass('u_layout_sidebar_max');
                    $("#u_sidebar").addClass("u_sidebar_shrink");
                }
                return false;
            }
            $(".u_layout").addClass("u_layout_sidebar_max").removeClass("u_layout_sidebar_min");
        });


        //响应式
        if ($(window).width() < 768) {
            $(".u_layout").addClass("u_layout_sidebar_min").removeClass('u_layout_sidebar_max');
            $("#u_sidebar").addClass("u_sidebar_shrink");
        }
        $(document).on('click', '#u_sidebar .u_sidebar_btn', function() {
            setTimeout(function() {
                $(".u_layout").toggleClass("u_layout_sidebar_max u_layout_sidebar_min");
            }, 300);
        });
        $(document).on('click', '#u_masking', function() {
            $(".u_layout").toggleClass("u_layout_sidebar_max u_layout_sidebar_min");
            $("#u_sidebar").toggleClass("u_sidebar_shrink");
        });







        //面板三按钮
        $(document).on("click", ".u_panel_slide_btn", function() {
            if ($(this).hasClass('icon-u-arrow2-down')) {
                $(this).closest('.u_panel').upanel("slideup");
            } else {
                $(this).closest('.u_panel').upanel("slidedown");
            }
            $(this).toggleClass('icon-u-arrow2-down icon-u-arrow2-up')

        });

        $(document).on("click", ".u_panel_full_btn", function() {
            if ($(this).hasClass('icon-u-resize-full')) {
                $(this).closest('.u_panel').upanel("full");
            } else {
                $(this).closest('.u_panel').upanel("canclefull");
            }
            $(this).toggleClass('icon-u-resize-full icon-u-resize-small')
        });

        $(document).on("click", ".u_panel_remove_btn", function() {
            $(this).closest('.u_panel').upanel("remove");
        });










    })
});
